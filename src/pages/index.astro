---
import Layout from "@/layouts/RootLayout.astro";
import Hero from "@/sections/hero.astro";
import LatestStreams from "@/sections/latest-streams.astro";
import LatestVideos from "@/sections/latest-videos.astro";
import InLiveNow from "@/sections/in-live-now.astro";
import LatestShorts from "@/sections/latest-shorts.astro";
import UpComing from "@/sections/up-coming.astro";
import Hosts from "@/sections/hosts.astro";
import CallToAction from "@/sections/call-to-action.astro";
import { GET } from "./api/youtube";

let response = await GET(Astro);

const data = await response.json();

const { streams, videos, live, shorts, upcomings } = data;
---

<Layout title="Carajo Stream - Pagina Principal">
  <main>
    <Hero />
    <LatestStreams streams={streams} />
    <LatestVideos videos={videos} />
    {live && <InLiveNow live={live} />}
    <LatestShorts shorts={shorts} />
    <UpComing upcomings={upcomings} />
    <Hosts />
    <CallToAction />
  </main>
</Layout>
